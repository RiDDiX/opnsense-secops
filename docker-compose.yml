services:
  opnsense-auditor:
    build: .
    image: ghcr.io/riddix/opnsense-secops:main
    container_name: opnsense-security-auditor
    volumes:
      - ./config:/app/config
      - ./reports:/app/reports
    environment:
      - OPNSENSE_HOST=${OPNSENSE_HOST:-192.168.1.1}
      - OPNSENSE_API_KEY=${OPNSENSE_API_KEY}
      - OPNSENSE_API_SECRET=${OPNSENSE_API_SECRET}
      - SCAN_NETWORK=${SCAN_NETWORK:-192.168.1.0/24}
    ports:
      - "5000:5000"
    restart: unless-stopped
    cap_add:
      - NET_ADMIN
      - NET_RAW
